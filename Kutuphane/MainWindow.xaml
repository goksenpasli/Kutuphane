<Window x:Class="Kutuphane.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ComponentModel="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:Extensions="clr-namespace:Extensions;assembly=Extensions"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:properties="clr-namespace:Kutuphane.Properties"
    Title="Kütüphane"
    DataContext="{Binding Mode=OneWay, Source={StaticResource MainViewModel}}"
    d:DesignHeight="578" d:DesignWidth="800" UseLayoutRounding="True" WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="22.4" />
        </Grid.RowDefinitions>
        <Ribbon Margin="0,-22,0,0">
            <Ribbon.ApplicationMenu>
                <RibbonApplicationMenu>
                    <RibbonApplicationMenu.SmallImageSource>
                        <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                            <Binding Source="Shell32.dll" />
                            <Binding Source="21" />
                        </MultiBinding>
                    </RibbonApplicationMenu.SmallImageSource>
                    <RibbonApplicationMenuItem Header="VERİTABANINI AÇ" Command="{Binding VeritabanınıAç}">
                        <RibbonApplicationMenuItem.ImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="72" />
                            </MultiBinding>
                        </RibbonApplicationMenuItem.ImageSource>
                    </RibbonApplicationMenuItem>
                    <RibbonApplicationMenuItem Header="ÇIKIŞ" Command="{Binding UygulamadanÇık}">
                        <RibbonApplicationMenuItem.ImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="215" />
                            </MultiBinding>
                        </RibbonApplicationMenuItem.ImageSource>
                    </RibbonApplicationMenuItem>
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenuItem IsEnabled="False" />
                    <RibbonApplicationMenu.AuxiliaryPaneContent>
                        <GroupBox Header="AYARLAR">
                            <StackPanel>
                                <HeaderedContentControl Header="RESİM ÇÖZÜNÜRLÜK AYARI">
                                    <Slider AutoToolTipPlacement="TopLeft" Maximum="1080" Minimum="96" SmallChange="1"
                                        TickFrequency="32"
                                        ToolTip="Resim Çözünürlük Ayarı Yüksek Ayarlarda Daha Net Görüntü Oluşturulur. Ancak Bellek Kullanımı Artar"
                                        Value="{Binding Path=DecodeHeight, Delay=500, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" />
                                </HeaderedContentControl>
                                <HeaderedContentControl Header="GÜNLÜK GECİKME BEDELİ">
                                    <Extensions:NumericUpDownControl Maximum="1080" Minimum="1" ShowMode="CurrencyMode" ToolTip="Kitap Gecikmesinde Uygulanacak Bedel"
                                        Value="{Binding Path=GünlükGecikmeBedeli, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" />
                                </HeaderedContentControl>
                                <HeaderedContentControl Header="HIZLI KİTAP İŞLEMİ VARSAYILAN GÜN">
                                    <Extensions:NumericUpDownControl Maximum="365" Minimum="1" SmallChange="1" ToolTip="Hızlı Kitap Verme İşleminde Uygulanacak Gün Süresi"
                                        Value="{Binding Path=HızlıKitapGirişGünSüresi, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" />
                                </HeaderedContentControl>
                                <HeaderedContentControl Header="ETKİNLİKLERİ ÖNCEDEN GÖSTERME GÜN SAYISI">
                                    <Extensions:NumericUpDownControl Maximum="365" Minimum="1" SmallChange="1"
                                        ToolTip="Durum Çubuğunda Yaklaşan Etkinliklerin Kaç Gün Öncesine Kadar Olacağını Gösterir"
                                        Value="{Binding Path=YaklaşanİşlemlerGünSayısı, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" />
                                </HeaderedContentControl>
                                <HeaderedContentControl Header="KİTAP UZATMA SAYISI">
                                    <Extensions:NumericUpDownControl Maximum="10" Minimum="1" SmallChange="1" ToolTip="Verilen Kitabın Tarihi En Çok Bu Kadar Kez Uzatılır."
                                        Value="{Binding Path=MaksimumUzatmaSayısı, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" />
                                </HeaderedContentControl>
                                <CheckBox Content="KİŞİ GİRİŞ AKTARMA YAP" IsChecked="{Binding Path=Aktarma, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" ToolTip="Bu İşaretliyse Kayıtlı TC Bulunduğunda Kitap Ver Ekranına Yönlendirir. İşaretli Kalması Önerilir." />
                                <CheckBox Content="KİTAP RESİM GÖSTER" IsChecked="{Binding Path=KitapResimGöster, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" ToolTip="Bu İşaretliyse Kitapta Resim Varsa Önizlemesi Gösterilir." />
                                <CheckBox Content="KİŞİ GİRİŞ EKRANI" IsChecked="{Binding Path=KişiGirişEkranıVarsayılan, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Source={x:Static properties:Settings.Default}}" ToolTip="Bu İşaretliyse Program Açılışında Kişi Giriş Ekranı Açılır." />
                                <Button Content="AYARLARI SIFIRLA" Command="{Binding AyarlarıSıfırla}" />
                            </StackPanel>
                        </GroupBox>
                    </RibbonApplicationMenu.AuxiliaryPaneContent>
                </RibbonApplicationMenu>
            </Ribbon.ApplicationMenu>
            <RibbonTab Header="KÜTÜPHANE">
                <RibbonTab.Resources>
                    <Style TargetType="RibbonButton">
                        <Setter Property="CanAddToQuickAccessToolBarDirectly" Value="False" />
                    </Style>
                </RibbonTab.Resources>
                <RibbonGroup Header="Kitap">
                    <RibbonButton Command="{Binding KitapGirişiEkranı, Mode=OneWay}" Label="Kitap Gir">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="1" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="1" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding KişiGirişiEkranı, Mode=OneWay}" Label="Kişi Gir">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="160" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="160" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding KitapGüncelleEkranı, Mode=OneWay}" Label="Kitap Güncelle">
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="238" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="238" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding KitapSilEkranı, Mode=OneWay}" Label="Kitap Sil">
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="31" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="31" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                    </RibbonButton>
                </RibbonGroup>
                <RibbonGroup Header="İşlem">
                    <RibbonButton Command="{Binding KitapVerEkranı}" Label="Kitap Ver">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="28" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding KitapKontrolEkranı}" Label="Kitap Kontrol Et">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="165" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="165" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding KitapGeriAlEkranı}" Label="Kitap Geri Al">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="146" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="146" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding GecikenKitaplarEkranı, Mode=OneWay}" Label="Geciken Kitaplar">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="239" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="239" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                </RibbonGroup>
                <RibbonGroup Header="Kütüphane">
                    <RibbonButton Command="{Binding DolapGirişiEkranı, Mode=OneWay}" Label="Dolap Gir">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Moricons.dll" />
                                <Binding Source="105" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Moricons.dll" />
                                <Binding Source="105" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                    <RibbonButton Command="{Binding DolapDüzeniEkranı, Mode=OneWay}" Label="Dolap Düzeni">
                        <RibbonButton.LargeImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="84" />
                            </MultiBinding>
                        </RibbonButton.LargeImageSource>
                        <RibbonButton.SmallImageSource>
                            <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                <Binding Source="Shell32.dll" />
                                <Binding Source="84" />
                            </MultiBinding>
                        </RibbonButton.SmallImageSource>
                    </RibbonButton>
                </RibbonGroup>
                <RibbonGroup Header="Rapor">
                    <RibbonMenuButton Label="Excele Aktar">
                        <RibbonMenuButton.LargeImageSource>
                            <Binding Converter="{StaticResource FilePathToIconConverter}" Source=".csv" />
                        </RibbonMenuButton.LargeImageSource>
                        <RibbonMenuButton.SmallImageSource>
                            <Binding Converter="{StaticResource FilePathToIconConverter}" Source=".csv" />
                        </RibbonMenuButton.SmallImageSource>
                        <RibbonMenuItem Header="KİTAP LİSTESİ RAPORU" Command="{Binding ReportViewModel.KitapListesiRaporu, Mode=OneWay}" />
                        <RibbonMenuItem Header="KİTAP ALANLAR RAPORU" Command="{Binding ReportViewModel.KitapAlanlarRaporu, Mode=OneWay}" />
                    </RibbonMenuButton>
                </RibbonGroup>
            </RibbonTab>
        </Ribbon>
        <ContentPresenter Content="{Binding CurrentView}" Grid.Row="1" />
        <StatusBar Grid.Row="2">
            <StatusBarItem DataContext="{Binding KitapGeriAlViewModel}">
                <StackPanel Orientation="Horizontal">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Yaklaşanİşlemler.Count}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <Extensions:ContentToggleButton>
                        <Extensions:ContentToggleButton.OverContent>
                            <Image Width="16" Height="16">
                                <Image.Source>
                                    <MultiBinding Converter="{StaticResource SystemFileIconConverter}">
                                        <Binding Source="Shell32.dll" />
                                        <Binding Source="239" />
                                    </MultiBinding>
                                </Image.Source>
                            </Image>
                        </Extensions:ContentToggleButton.OverContent>
                        <Extensions:ContentToggleButton.Content>
                            <Grid Width="480" Height="360">
                                <Grid.Resources>
                                    <CollectionViewSource x:Key="İşlemler" Source="{Binding ElementName=Lv, Path=SelectedItem.İşlem}">
                                        <CollectionViewSource.SortDescriptions>
                                            <ComponentModel:SortDescription Direction="Ascending" PropertyName="GeriGetirmeTarihi" />
                                        </CollectionViewSource.SortDescriptions>
                                    </CollectionViewSource>
                                </Grid.Resources>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <ListView x:Name="Lv" ItemsSource="{Binding Yaklaşanİşlemler}">
                                    <ListView.View>
                                        <GridView>
                                            <GridViewColumn Header="AD" DisplayMemberBinding="{Binding Ad}" />
                                            <GridViewColumn Header="SOYAD" DisplayMemberBinding="{Binding Soyad}" />
                                            <GridViewColumn Header="TC" DisplayMemberBinding="{Binding TC}" />
                                        </GridView>
                                    </ListView.View>
                                </ListView>
                                <ListBox Grid.Column="1" ItemsSource="{Binding Mode=OneWay, Source={StaticResource İşlemler}}">
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding İşlemBitti}" Value="true">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListBox.ItemContainerStyle>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <TextBlock Text="{Binding GeriGetirmeTarihi}" Foreground="Red" />
                                                <ComboBox IsEnabled="False"
                                                    ItemsSource="{Binding Kütüphane.Kitaplar, Source={StaticResource MainViewModel}}"
                                                    DisplayMemberPath="Ad"
                                                    SelectedValue="{Binding KitapId}"
                                                    SelectedValuePath="Id" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </Extensions:ContentToggleButton.Content>
                    </Extensions:ContentToggleButton>
                    <TextBlock Text="SÜRESİ YAKLAŞAN KİTAPLAR" />
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
